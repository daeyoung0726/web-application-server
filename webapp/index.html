<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>
</head>
<body>
<h1>메인 페이지</h1>
<nav>
    <a href="./user/signin.html">로그인</a>
    <a href="./user/signup.html">회원가입</a>
    <form action="/users/sign-out" method="POST" style="display: inline;">
        <button type="submit">로그아웃</button>
    </form>
    <a href="./user/my.html">마이페이지</a>
    <a href="./post/write.html">글쓰기</a>
    <a href="./user/users.html">전체 회원 불러오기</a>
</nav>
<h2>게시글 목록</h2>
<ul id="postList"></ul>

<script>
    async function fetchPosts() {
        try {
            const response = await fetch('/posts');
            if (!response.ok) {
                throw new Error('게시글을 가져오지 못했습니다.');
            }
            const posts = await response.json();
            const postList = document.getElementById('postList');
            postList.innerHTML = '';

            posts.forEach(post => {
                const listItem = document.createElement('li');
                const link = document.createElement('a');
                link.href = `post/post.html?id=${post.id}`;
                link.textContent = post.title;
                listItem.appendChild(link);
                postList.appendChild(listItem);
            });
        } catch (error) {
            console.error('Error fetching posts:', error);
        }
    }

    window.onload = fetchPosts;
</script>
</body>
</html>
